<!-- Created by Kammar1006 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Menufy - Application for searching restaurants and dishes. </title>
    <style>
        .w50{
            width: 50%;
        }
        .flex{
            display: flex;
        }
        .center{
            text-align: center;
        }
    </style>
</head>
<body>
    
    <h1 class="center"> Menufy </h1>
    <hr/>

    <div class="flex center">

        <!-- Example Form for searching places using name -->
        <div class="w50">
            <h2> Basic Search </h2>
            <form id="form_S1">
                <p>
                    <span> Place Name </span>
                    <br>
                    <input id="form_S1_name" value=""/>
                </p>
                <input id="form_S1_button" type="submit" value="search"/>
            </form>
            <hr>
            <form id="form_S2">
                <p>
                    <span> Dish Name </span>
                    <br>
                    <input id="form_S2_name" value=""/>
                </p>
                <input id="form_S2_button" type="submit" value="search"/>
            </form>
            <hr>
            <form id="form_S3">
                <p>
                    <span> Ingedient Name </span>
                    <br>
                    <input id="form_S3_name" value=""/>
                </p>
                <input id="form_S3_button" type="submit" value="search"/>
            </form>
            <hr>
            <form id="form_S4">
                <p>
                    <span> Coord X </span><br>
                    <input id="form_S4_x" value=""/><br>
                    <span> Coord Y </span><br>
                    <input id="form_S4_y" value=""/><br>
                    <span> Coord R </span><br>
                    <input id="form_S4_r" value=""/><br>
                </p>
                <input id="form_S4_button" type="submit" value="search"/>
            </form>
        </div>

        <div class="w50">
            <h2> Advanced Search </h2>
            <form id="form_SA">
                <p>
                    <span> Place Name </span>
                    <br>
                    <input id="form_SA_res_name" value=""/>
                </p>
                <p>
                    <span> Dish Name </span>
                    <br>
                    <input id="form_SA_dish_name" value=""/>
                </p>
                <p>
                    <span> Ingedient Name </span>
                    <br>
                    <input id="form_SA_ing_name" value=""/>
                </p>
                <p>
                    <span> Coords </span>
                    <br>
                    <input id="form_SA_res_x" value="" placeholder="longitude (x)"/>
                    <input id="form_SA_res_y" value="" placeholder="latitude (y)"/>
                    <input id="form_SA_res_r" value="" placeholder="radius"/>
                </p>
                <input id="form_SA_button" type="submit" value="search"/>
            </form>
        </div>
    </div>
    <hr>
    <p id="places_list">  </p>

    <hr>

    <div class="flex center">
        <div class="w50">
            <!-- Example login form -->
            <h2> Login </h2>
            <form id="form_U1">
                <p>
                    <span> Login </span>
                    <br>
                    <input id="form_U1_login" value=""/>  
                </p>
                <p>
                    <span> Pass </span>
                    <br>
                    <input type="password" id="form_U1_pass" value=""/>  
                </p>
                <input id="form_U1_button" type="submit" value="login"/>
            </form>
            <p id="login_info">  </p>
        </div>
        <div class="w50">
            <!-- Example register form -->
            <h2> Register </h2>
            <form id="form_U2">
                <p>
                    <span> Login </span>
                    <br>
                    <input id="form_U2_login" value=""/>  
                </p>
                <p>
                    <span> Pass </span>
                    <br>
                    <input type="password" id="form_U2_pass" value=""/>  
                </p>
                <p>
                    <span> Pass2 </span>
                    <br>
                    <input type="password" id="form_U2_pass2" value=""/>  
                </p>
                <p>
                    <span> Email </span>
                    <br>
                    <input id="form_U2_email" value=""/>  
                </p>
                <input id="form_U2_button" type="submit" value="register"/>
            </form>
            <p id="register_info">  </p>
        </div>
    </div>
    <hr>
    <div class="flex center">
        <div class="w50">
            <h2> Page for Restaurant </h2>
            <form id="form_RI">
                <p>
                    <span> Restaurant ID </span>
                    <br>
                    <input id="form_RI_id" value=""/>
                </p>
                <input id="form_RI_button" type="submit" value="search"/>
            </form>
        </div>
        <div class="w50">
            <h2> Page for Dishes </h2>
            <form id="form_DI">
                <p>
                    <span> Dish ID </span>
                    <br>
                    <input id="form_DI_id" value=""/>
                </p>
                <input id="form_DI_button" type="submit" value="search"/>
            </form>
        </div>
    </div>
    <hr>
    <p id="res_info">  </p>
    <p id="res_comments">  </p>
    <p id="menu_list">  </p>
    <hr>
    <h1 class="center"> For Auth Users </h1>
    <hr>
    <div class="flex center">
        <div class="w50">
            <h2> Add restaurant </h2>
            <form id="form_U3">
                <p>
                    <span> Name </span>
                    <br>
                    <input id="form_U3_name" value=""/>
                </p>
                <p> 
                    <span> Address </span>
                    <br>
                    <input id="form_U3_address" value=""/>
                </p>
                <input id="form_U3_button" type="submit" value="add"/>
            </form>
        </div>
        <div class="w50">
            <h2> Add Dish </h2>
        </div>
    </div>
    <hr>
    <div class="flex center">
        <div class="w50">
            <h2> Change Coords </h2>
            <form id="form_U5">
                <p>
                    <span> ID </span>
                    <br>
                    <input id="form_U5_id" value=""/>
                </p>
                <p>
                    <span> Coords </span>
                    <br>
                    <input id="form_U5_coord_x" value=""/>
                    <input id="form_U5_coord_y" value=""/>
                </p>
                <input id="form_U5_button" type="submit" value="update"/>
            </form>
        </div>
        <div class="w50">
            <h2> Add Comment </h2>
        </div>
    </div>
    <hr>
    <h1 class="center"> For Admins </h1>
    <hr>
    <div class="flex center">
        <div class="w50">
            <h2> Verify restaurant </h2>
        </div>
        <div class="w50">
            <h2> Verify Dish </h2>
        </div>
    </div>
    <hr>
    <div class="flex center">
        <div class="w50">
            <h2> Verify Coords </h2>
        </div>
        <div class="w50">
            <h2> Verify Comment </h2>
        </div>
    </div>
    <hr>
    <input style="display: none;" id="clicker" value="click" type="submit"/>


    <script src="/socket.io/socket.io.js"></script>
    <script>
        (() => {
            const sock = io();

            //get data from backend
            sock.on("restaurants", (places) => {
                console.log(places); //show in console
                document.getElementById("places_list").innerHTML = "";
                places.forEach(e => document.getElementById("places_list").innerHTML += JSON.stringify(e)+"<br>");
                //document.querySelector("#places_list").innerHTML = JSON.stringify(places);
            });

            sock.on("dishesList", (d) => {
                console.log(d); //show in console
                document.getElementById("menu_list").innerHTML = "";
                d.forEach(e => document.getElementById("menu_list").innerHTML += JSON.stringify(e)+"<br>");
            });

            sock.on("restaurantInfo", (d) => {
                console.log(d); //show in console
                document.getElementById("res_info").innerHTML = "";
                d.forEach(e => document.getElementById("res_info").innerHTML += JSON.stringify(e)+"<br>");
            });

            sock.on("ingredientsList", (d) => {
                console.log(d); //show in console
                document.getElementById("menu_list").innerHTML = "";
                d.forEach(e => document.getElementById("menu_list").innerHTML += JSON.stringify(e)+"<br>");
            });

            sock.on("login", (e) => {
                console.log(e);
            });

            sock.on("register", (e) => {
                console.log(e);
            });

            sock.on("set-cookie", (cookie) => {
                document.cookie = cookie;  // Set Cookie in client-site
                console.log("Cookie", cookie);
            });

            sock.on("message", (t) => {
                console.log("message: ", t);
            });

            //send info to backend - form 1
            document
                .querySelector("#form_S1_button")
                .addEventListener('click', (e) => {
                    let name = document.querySelector("#form_S1_name").value;
                    sock.emit("searchByName", name);
                });

            document
                .querySelector("#form_S2_button")
                .addEventListener('click', (e) => {
                    let name = document.querySelector("#form_S2_name").value;
                    sock.emit("searchByDish", name);
                });
            document
                .querySelector("#form_S3_button")
                .addEventListener('click', (e) => {
                    let name = document.querySelector("#form_S3_name").value;
                    sock.emit("searchByIngredient", name);
                });
            document
                .querySelector("#form_S4_button")
                .addEventListener('click', (e) => {
                    let coords = {
                        x: document.querySelector("#form_S4_x").value,
                        y: document.querySelector("#form_S4_y").value,
                        r: document.querySelector("#form_S4_r").value,
                    }
                    sock.emit("searchByCoords", JSON.stringify(coords));
                });
            document
                .querySelector("#form_SA_button")
                .addEventListener('click', (e) => {
                    let data = {
                        res_name: document.querySelector("#form_SA_res_name").value,
                        dish_name: document.querySelector("#form_SA_dish_name").value,
                        ing_name: document.querySelector("#form_SA_ing_name").value,
                        res_x: document.querySelector("#form_SA_res_x").value,
                        res_y: document.querySelector("#form_SA_res_y").value,
                        res_r: document.querySelector("#form_SA_res_r").value,
                    } 
                    sock.emit("advancedSearch", JSON.stringify(data));
                });

            //send info to backend - form 2 - login
            document
                .querySelector("#form_U1_button")
                .addEventListener('click', (e) => {
                    let login = document.querySelector("#form_U1_login").value;
                    let pass = document.querySelector("#form_U1_pass").value;
                    sock.emit("login", login, pass);
                });

            //send info to backend - form 3 - register
            document
                .querySelector("#form_U2_button")
                .addEventListener('click', (e) => {
                    let login = document.querySelector("#form_U2_login").value;
                    let pass = document.querySelector("#form_U2_pass").value;
                    let pass2 = document.querySelector("#form_U2_pass2").value;
                    let email = document.querySelector("#form_U2_email").value;
                    sock.emit("register", login, pass, pass2, email);
                });

            document
                .querySelector("#form_RI_button")
                .addEventListener('click', (e) => {
                    sock.emit("getDishesByResId", document.querySelector("#form_RI_id").value);
                    sock.emit("getRestaurantInfo", document.querySelector("#form_RI_id").value);
                    sock.emit("getComments", document.querySelector("#form_RI_id").value);
                });

            document
                .querySelector("#form_DI_button")
                .addEventListener('click', (e) => {
                    sock.emit("getIngredientsByDishId", document.querySelector("#form_DI_id").value);
                });

            document
                .querySelector("#clicker")
                .addEventListener("click", (e) => {
                    sock.emit("counter");
                });
        })();

        //not reload site when click form
        document
            .querySelector("#form_S1")
            .addEventListener('submit', (e) => {
                e.preventDefault();
            });
        document
            .querySelector("#form_S2")
            .addEventListener('submit', (e) => {
                e.preventDefault();
            });
        document
            .querySelector("#form_S3")
            .addEventListener('submit', (e) => {
                e.preventDefault();
            });
        document
            .querySelector("#form_S4")
            .addEventListener('submit', (e) => {
                e.preventDefault();
            });
        document
            .querySelector("#form_SA")
            .addEventListener('submit', (e) => {
                e.preventDefault();
            });
        document
            .querySelector("#form_U1")
            .addEventListener('submit', (e) => {
                e.preventDefault();
            });
        document
            .querySelector("#form_U2")
            .addEventListener('submit', (e) => {
                e.preventDefault();
            });
        document
            .querySelector("#form_RI")
            .addEventListener('submit', (e) => {
                e.preventDefault();
            });
        document
            .querySelector("#form_DI")
            .addEventListener('submit', (e) => {
                e.preventDefault();
            });
    
    </script>
</body>
</html>




